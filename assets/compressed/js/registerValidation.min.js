const navLink=document.querySelectorAll(".nav-no-register"),registerModal=bootstrap.Modal.getOrCreateInstance("#registerModal");navLink.forEach(e=>{e.addEventListener("click",function(e){registerModal.show()})}),document.querySelector("#register-modal-login").onclick=(()=>{registerModal.hide(),bootstrap.Modal.getOrCreateInstance("#loginModal").show()}),document.querySelector("#register-nav").onclick=(()=>{registerModal.show()});const usernameEl=document.querySelector("#register_nickname"),emailEl=document.querySelector("#register_email"),passwordEl=document.querySelector("#register_password"),confirmPasswordEl=document.querySelector("#register_password_two"),form=document.querySelector("#register-form"),checkUsername=()=>{let e=!1;const r=usernameEl.value.trim();return isRequired(r)?isBetween(r.length,3,40)?(usernameEl.classList.remove("error-input-border"),showSuccess(usernameEl),e=!0):(usernameEl.classList.add("error-input-border"),showError(usernameEl,"Username must be between 3 and 40 characters.")):(showError(usernameEl,"Username cannot be blank."),usernameEl.classList.add("error-input-border")),e},checkEmail=()=>{let e=!1;const r=emailEl.value.trim();return isRequired(r)?isEmailValid(r)?(emailEl.classList.remove("error-input-border"),showSuccess(emailEl),e=!0):(emailEl.classList.add("error-input-border"),showError(emailEl,"Email is not valid.")):(emailEl.classList.add("error-input-border"),showError(emailEl,"Email cannot be blank.")),e},checkPassword=()=>{let e=!1;const r=passwordEl.value.trim();return isRequired(r)?(passwordEl.classList.remove("error-input-border"),showSuccess(passwordEl),e=!0):(passwordEl.classList.add("error-input-border"),showError(passwordEl,"Password cannot be blank.")),e},checkConfirmPassword=()=>{let e=!1;const r=confirmPasswordEl.value.trim(),s=passwordEl.value.trim();return isRequired(r)?s!==r?(confirmPasswordEl.classList.add("error-input-border"),showError(confirmPasswordEl,"The password does not match")):(confirmPasswordEl.classList.remove("error-input-border"),showSuccess(confirmPasswordEl),e=!0):(confirmPasswordEl.classList.add("error-input-border"),showError(confirmPasswordEl,"Please enter the password again")),e},isEmailValid=e=>{return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},isPasswordSecure=e=>{return new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})").test(e)},isRequired=e=>""!==e,isBetween=(e,r,s)=>!(e<r||e>s),showError=(e,r)=>{const s=e.parentElement;s.classList.remove("success"),s.classList.add("error"),s.querySelector("small").textContent=r},showSuccess=e=>{const r=e.parentElement;r.classList.remove("error"),r.classList.add("success"),r.querySelector("small").textContent=""};form.addEventListener("submit",function(e){e.preventDefault();let r=checkUsername(),s=checkEmail(),o=checkPassword(),a=checkConfirmPassword();r&&s&&o&&a&&form.submit()});const debounce=(e,r=500)=>{let s;return(...o)=>{s&&clearTimeout(s),s=setTimeout(()=>{e.apply(null,o)},r)}};form.addEventListener("input",debounce(function(e){switch(e.target.id){case"username":checkUsername();break;case"email":checkEmail();break;case"password":checkPassword();break;case"confirm-password":checkConfirmPassword()}}));